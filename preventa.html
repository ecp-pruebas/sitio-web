<!DOCTYPE html>
<html>
<head>
<title>Preventa</title>
<link rel="stylesheet" href="./style.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
</head>

<header>
  <ul class="encabezado">
      <li><a href="./index.html">El Cine Probablemente</a></li>
      <li><a href="no-1.html">Número actual</a></li>
      <li><a href="preventa.html">Preventa</a></li>
      <li><a href="contacto.html">Contacto</a></li>
  </ul>
</header>

<br>

<body>

<h2>Preventa del primer número</h2>
<p>Actualmente está en curso la venta anticipada del primer número de la revista, que se entregará impreso a finales del mes de septiembre del presente año, cuando también comience la venta normal.</p>

<p>El propósito de la preventa es desahogar lo más posible los costos de impresión. Debido a que somos un proyecto pequeño, si queremos publicar en papel necesitamos contar con un monto inicial considerable para cubrir la impresión de la totalidad de los ejemplares. Confiamos en que los compradores encontrarán valor en los contenidos de la revista y en el esfuerzo especial que implica hacerla en papel, y queremos que tengan la confianza de que les entregaremos en tiempo y forma los ejemplares que hayan adquirido.</p> 

<p>Cada ejemplar tiene un precio de $200 MXN (más costos de envío). Aceptamos pagos a través de PayPal (pagando con tarjeta o con cuenta de PayPal), y transferencias y depósitos bancarios directos. Los costos de envío varían según los siguientes lugares de entrega:</p>


<h3>Ciudad de México</h3>
<p>Si el ejemplar se entrega personalmente en varios puntos cinéfilos de la ciudad y en los eventos de presentación, no hay costo de envío y el precio se mantiene en $200 MXN. Los puntos de entrega y las presentaciónes las anunciaremos en redes sociales y las comunicaremos directamente a nuestros compradores para que pasen a recoger sus ejemplares.</p>

<p>Si así lo deseas, podemos enviar la revista a la dirección que nos proporciones pagando mensajería, que tiene un costo de $75 MXN (llega entre 2 y 5 dias hábiles después del envío), lo que suma un total de $275 MXN por ejemplar.</p>

<p>Puedes comprar un ejemplar pagando en línea&nbsp;<a href="#pago">aquí.</a> Si prefieres realizar un depósito o transferencia bancaria, escríbenos un correo a elcineprobablemente.contacto@gmail.com </p>



<h3>Interior de la republica mexicana</h3>
<p>Contamos con dos opciones de envío: en Estafeta, con la cual el precio por ejemplar es de $350 MXN (llega entre 3 y 5 días hábiles después del envío); y en Correos de México, con la cual el precio es de $263 MXN (llega entre 20 y 30 días hábiles después del envío). Si quieres comprar más de un ejemplar por envío, escríbenos para darte tarifas convenientes.</p>

<p>Puedes comprar un ejemplar pagando en línea&nbsp;<a href="#pago">aquí.</a> Si prefieres realizar un depósito o transferencia bancaria, escríbenos un correo a: elcineprobablemente.contacto@gmail.com </p>

<h3>Internacional</h3>
<p>El precio de la revista es $10 USD. Aceptamos transferencia por PayPal.
Debido a que los precios de envío cambian considerablemente dependiendo del lugar, escríbenos informando a dónde te gustaría que enviáramos la revista para ofrecerte costos y opciones de envío.</p>

<h3><a name="pago">Comprar en línea</a></h3>
<div class="indice">
<ul>
	<li>Si quieres comprar más de un ejemplar con envío, escríbenos un correo electrónico para ofrecerte tarifas convenientes.</li>
	<li>Si quieres que la dirección de envío sea diferente a la de facturación, escríbenos o anótalo en los comentarios del pedido.</li>
</ul>
</div>
<div id="smart-button-container">
      <div style="text-align: center;">
        <div style="margin-bottom: 1.25rem;">
          <p>Preventa - Un ejemplar de la revista</p>
          <select id="item-options"><option value="Entrega personal en CDMX" price="200">Entrega personal en CDMX - 200 MXN</option><option value="Envío por Estafeta" price="350">Envío por Estafeta - 350 MXN</option><option value="Envío por Correos de México" price="263">Envío por Correos de México - 263 MXN</option></select>
          <select style="visibility: hidden" id="quantitySelect"></select>
        </div>
      <div id="paypal-button-container"></div>
      </div>
    </div>
    <script src="https://www.paypal.com/sdk/js?client-id=sb&enable-funding=venmo&currency=MXN" data-sdk-integration-source="button-factory"></script>
    <script>
      function initPayPalButton() {
        var shipping = 0;
        var itemOptions = document.querySelector("#smart-button-container #item-options");
    var quantity = parseInt();
    var quantitySelect = document.querySelector("#smart-button-container #quantitySelect");
    if (!isNaN(quantity)) {
      quantitySelect.style.visibility = "visible";
    }
    var orderDescription = 'Preventa - Un ejemplar de la revista';
    if(orderDescription === '') {
      orderDescription = 'Item';
    }
    paypal.Buttons({
      style: {
        shape: 'rect',
        color: 'black',
        layout: 'vertical',
        label: 'paypal',
        
      },
      createOrder: function(data, actions) {
        var selectedItemDescription = itemOptions.options[itemOptions.selectedIndex].value;
        var selectedItemPrice = parseFloat(itemOptions.options[itemOptions.selectedIndex].getAttribute("price"));
        var tax = (0 === 0 || false) ? 0 : (selectedItemPrice * (parseFloat(0)/100));
        if(quantitySelect.options.length > 0) {
          quantity = parseInt(quantitySelect.options[quantitySelect.selectedIndex].value);
        } else {
          quantity = 1;
        }

        tax *= quantity;
        tax = Math.round(tax * 100) / 100;
        var priceTotal = quantity * selectedItemPrice + parseFloat(shipping) + tax;
        priceTotal = Math.round(priceTotal * 100) / 100;
        var itemTotalValue = Math.round((selectedItemPrice * quantity) * 100) / 100;

        return actions.order.create({
    "application_context": {
        shipping_preference: "NO_SHIPPING",
    },
          purchase_units: [{
            description: orderDescription,
            amount: {
              currency_code: 'MXN',
              value: priceTotal,
              breakdown: {
                item_total: {
                  currency_code: 'MXN',
                  value: itemTotalValue,
                },
                shipping: {
                  currency_code: 'MXN',
                  value: shipping,
                },
                tax_total: {
                  currency_code: 'MXN',
                  value: tax,
                }
              }
            },
            items: [{
              name: selectedItemDescription,
              unit_amount: {
                currency_code: 'MXN',
                value: selectedItemPrice,
              },
              quantity: quantity
            }]
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(orderData) {
          
          // Full available details
          console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));

          // Show a success message within this page, e.g.
          const element = document.getElementById('paypal-button-container');
          element.innerHTML = '';
          element.innerHTML = '<h3>Thank you for your payment!</h3>';

          // Or go to another URL:  actions.redirect('thank_you.html');

        });
      },

   onShippingChange: function(data,actions){
                    return actions.resolve();
                },
      onError: function(err) {
        console.log(err);
      },

    }).render('#paypal-button-container');
  }
  initPayPalButton();
    </script>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
